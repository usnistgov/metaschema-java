{
  "$schema" : "http://json-schema.org/draft-07/schema#",
  "$id" : "http://csrc.nist.gov/ns/metaschema/testing/fields/with/flags/complex-field-1.0-schema.json",
  "$comment" : "Metaschema with complex field",
  "type" : "object",
  "definitions" : {
    "FieldComplexFieldComplexField2Type" : {
      "$id" : "#/definitions/FieldComplexFieldComplexField2Type",
      "title" : "Complex Field 1",
      "description" : "A complex field with a flag",
      "type" : "object",
      "properties" : {
        "id" : {
          "$ref" : "#/definitions/FlagComplexFieldIdType"
        },
        "STRVALUE" : {
          "$ref" : "#/definitions/StringDatatype"
        }
      },
      "required" : [ "STRVALUE" ],
      "additionalProperties" : false
    },
    "FlagComplexFieldIdType" : {
      "$id" : "#/definitions/FlagComplexFieldIdType",
      "title" : "Identifier",
      "description" : "The document identifier",
      "$ref" : "#/definitions/StringDatatype"
    },
    "FlagComplexFieldComplexField5NameType" : {
      "$id" : "#/definitions/FlagComplexFieldComplexField5NameType",
      "title" : "A flag",
      "description" : "A simple flag",
      "$ref" : "#/definitions/StringDatatype"
    },
    "AssemblyComplexFieldTopLevelType" : {
      "$id" : "#/definitions/AssemblyComplexFieldTopLevelType",
      "title" : "Root",
      "description" : "Root assembly",
      "type" : "object",
      "properties" : {
        "id" : {
          "$ref" : "#/definitions/FlagComplexFieldIdType"
        },
        "complex-field1" : {
          "$ref" : "#/definitions/FieldComplexFieldComplexField1Type"
        },
        "complex-fields2" : {
          "oneOf" : [ {
            "$ref" : "#/definitions/FieldComplexFieldComplexField2Type"
          }, {
            "type" : "array",
            "items" : {
              "$ref" : "#/definitions/FieldComplexFieldComplexField2Type"
            },
            "minItems" : 2
          } ]
        },
        "complex-fields3" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/FieldComplexFieldComplexField3Type"
          },
          "minItems" : 2
        },
        "complex-fields4" : {
          "type" : "object",
          "minProperties" : 1,
          "propertyNames" : {
            "$ref" : "#/definitions/StringDatatype"
          },
          "additionalProperties" : {
            "$ref" : "#/definitions/FieldComplexFieldComplexField4Type"
          }
        },
        "complex-fields5" : {
          "oneOf" : [ {
            "$ref" : "#/definitions/FieldComplexFieldComplexField5Type"
          }, {
            "type" : "array",
            "items" : {
              "$ref" : "#/definitions/FieldComplexFieldComplexField5Type"
            },
            "minItems" : 2
          } ]
        }
      },
      "required" : [ "complex-fields2", "complex-fields3" ],
      "additionalProperties" : false
    },
    "FieldComplexFieldComplexField1Type" : {
      "$id" : "#/definitions/FieldComplexFieldComplexField1Type",
      "title" : "Complex Field 1",
      "description" : "A complex field with a flag",
      "type" : "object",
      "properties" : {
        "id" : {
          "$ref" : "#/definitions/FlagComplexFieldIdType"
        },
        "STRVALUE" : {
          "$ref" : "#/definitions/StringDatatype"
        }
      },
      "required" : [ "STRVALUE" ],
      "additionalProperties" : false
    },
    "FieldComplexFieldComplexField3Type" : {
      "$id" : "#/definitions/FieldComplexFieldComplexField3Type",
      "title" : "Complex Field 3",
      "description" : "A complex field with a flag",
      "type" : "object",
      "properties" : {
        "id2" : {
          "$ref" : "#/definitions/FlagComplexFieldComplexField3Id2Type"
        },
        "STRVALUE" : {
          "$ref" : "#/definitions/StringDatatype"
        }
      },
      "required" : [ "STRVALUE" ],
      "additionalProperties" : false
    },
    "FlagComplexFieldComplexField3Id2Type" : {
      "$id" : "#/definitions/FlagComplexFieldComplexField3Id2Type",
      "title" : "A flag",
      "description" : "A simple flag",
      "$ref" : "#/definitions/StringDatatype"
    },
    "FieldComplexFieldComplexField4Type" : {
      "$id" : "#/definitions/FieldComplexFieldComplexField4Type",
      "title" : "Complex Field 4",
      "description" : "A complex field with a flag",
      "$ref" : "#/definitions/StringDatatype"
    },
    "FlagComplexFieldComplexField4Id2Type" : {
      "$id" : "#/definitions/FlagComplexFieldComplexField4Id2Type",
      "title" : "A flag",
      "description" : "A simple flag",
      "$ref" : "#/definitions/StringDatatype"
    },
    "FieldComplexFieldComplexField5Type" : {
      "$id" : "#/definitions/FieldComplexFieldComplexField5Type",
      "title" : "Complex Field 5",
      "description" : "A complex field with a flag that is collapsible",
      "type" : "object",
      "properties" : {
        "name" : {
          "$ref" : "#/definitions/FlagComplexFieldComplexField5NameType"
        },
        "STRVALUE" : {
          "oneOf" : [ {
            "$ref" : "#/definitions/StringDatatype"
          }, {
            "type" : "array",
            "minItems" : 1,
            "items" : {
              "$ref" : "#/definitions/StringDatatype"
            }
          } ]
        }
      },
      "required" : [ "STRVALUE" ],
      "additionalProperties" : false
    },
    "StringDatatype" : {
      "description" : "A non-empty string with leading and trailing whitespace disallowed. Whitespace is: U+9, U+10, U+32 or [ \n\t]+",
      "type" : "string",
      "pattern" : "^\\S(.*\\S)?$"
    }
  },
  "properties" : {
    "$schema" : {
      "type" : "string",
      "format" : "uri-reference"
    },
    "top-level" : {
      "$ref" : "#/definitions/AssemblyComplexFieldTopLevelType"
    }
  },
  "required" : [ "top-level" ],
  "additionalProperties" : false
}